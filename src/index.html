<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Enzo | Space Invaders</title>
		<style>
			body,
			html {
				width: 100%;
				height: 100%;
				margin: 0;
				padding: 0;
				overflow: hidden;
				background-color: #000;
			}

			#gamecontainer {
				width: 1200px;
				margin-left: auto;
				margin-right: auto;
			}
			#gamecanvas {
				width: 1200px;
				height: 600px;
			}
			#gameinfo {
				position: relative;
				bottom: 0;
				width: 100%;
				display: flex;
				justify-content: space-between;
				padding: 10px;
				box-sizing: border-box;
				font-family: Arial, sans-serif;
				color: #ffffff;
			}
			#gameinfo div {
				flex: 1;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<div id="gamecontainer">
			<canvas id="gameCanvas"></canvas>
			<div id="gameinfo">
				<div id="lives"></div>
				<div id="score"></div>
				<div id="level"></div>
			</div>
		</div>

		<script type="module">
			import Game from "./js/index.js";

			const canvas = document.getElementById("gameCanvas");
			canvas.width = 1200;
			canvas.height = 600;

			const game = new Game();
			game.initialise(canvas);
			game.start();

			const handleKeyDown = (e) => {
				const keycode = e.which || window.event.keycode;
				if ([37, 39, 32].includes(keycode)) e.preventDefault();
				game.keyDown(keycode);
			};

			const handleKeyUp = (e) => {
				const keycode = e.which || window.event.keycode;
				game.keyUp(keycode);
			};

			window.addEventListener("keydown", handleKeyDown);
			window.addEventListener("keyup", handleKeyUp);

			window.addEventListener("touchstart", (e) => game.touchstart(e), false);
			window.addEventListener("touchend", (e) => game.touchend(e), false);
			window.addEventListener("touchmove", (e) => game.touchmove(e), false);
		</script>
	</body>
</html>
